<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Media Feeds API</title>
  <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
  <script class='remove'>
  "use strict";
  // See https://github.com/w3c/respec/wiki/ for how to configure ReSpec
  var respecConfig = {
    "githubAPI": "WICG/media-feeds",
    "editors": [{
        name: "Becca Hughes",
        email: "beccahughes@chromium.org",
        company: "Google LLC"
      },
      // Add additional editors here.
      // https://github.com/w3c/respec/wiki/editors
    ],
    "shortName": "media-feeds",
    "specStatus": "CG-DRAFT",
    "wg": "WICG",
  };
  </script>
</head>

<body>
  <section id="abstract">
    <p>
      This specification enables web developers to show personalized media
      recommendations on the browser UI.
    </p>
  </section>
  <section id="sotd">
    <p>
      This is an unofficial proposal.
    </p>
  </section>
  <section id="introduction">
    <h2>Introduction</h2>
    <p>
      <em>This section is non-normative.</em>
    </p>

    <p>
      Media is used extensively today, and the Web is one of the primary
      means of consuming media content. Many browsers show content
      recommendations in their UI. This specification aims to enable web
      sites to specify a feed of personalized media recommendations that
      can be fetched by the browser and displayed in the browser UI. By
      improving media discovery this would improve the user experience
      as well as providing web sites with a new way of reaching users.
    </p>
  </section>

  <section id="conformance">
    <p>
      Unless otherwise stated, string comparisons are done in a
      <a data-cite="HTML#case-sensitive">case-sensitive</a> manner.
    </p>
  </section>

  <section id="retrieval-of-media-feeds">
    <h2>Retrieval of Media Feeds</h2>

    <p>
      The user agent MUST initiate a <a data-cite="FETCH#fetching">fetch</a>
      with the <a data-cite="FETCH#concept-header-list">header list</a>
      containing the <a data-cite="rfc7231#header.accept">accept header</a> set
      to <a data-cite="json-ld11#iana-considerations">application/ld+json</a>.
      The site will return the <dfn>media feed document</dfn> which MUST be a
      <a data-cite="json-ld11#dfn-json-ld-document">valid JSON+LD</a> document</a>.
    </p>

    <p>
      The <a>media feed document</a> should be a
      <a data-cite="schema-org/DataFeed#">DataFeed</a>. This has a
      <a data-cite="schema-org/provider#">provider</a> property that contains
      an <a data-cite="schema-org/Organization#">Organization</a> to describe
      the <dfn>publishing web site</dfn>. The
      <a data-cite="schema-org/member#">member</a> field on
      <a data-cite="schema-org/Organization#">Organization</a> should
      contain a <a data-cite="schema-org/Person#">Person</a> that contains the
      details about the <dfn>currently logged in user</dfn>. The user agent can
      show this to the user to identifier which account the recommendations are
      coming from. This is especially important if the media site supports
      multiple profiles.
    </p>

    <p>
      The user agent MUST validate the <a>media feed document</a> using the
      following steps:

      <ul>
        <li>
          The <a data-cite="json-ld11#the-context">context</a> MUST be set to
          <code>https://schema.org</code>.
        </li>
        <li>
          The <a data-cite="json-ld11#specifying-the-type">type</a> MUST be
          set to <a data-cite="schema-org/DataFeed#">DataFeed</a>.
        </li>
        <li>
          The <a data-cite="schema-org/member#">provider</a> property MUST
          contain a <a data-cite="schema-org/Organization#">Organization</a>
          that is a valid <a>publishing web site</a>.
        </li>
        <li>
          The <a data-cite="schema-org/dataFeedElement#">dataFeedElement</a>
          property SHOULD be present. If present, it MUST contain valid
          <a>media feed items</a>.
        </li>
      </ul>
    </p>

    <p>
      The user agent MUST validate the <a>publishing web site</a> using
      the following steps:

      <ul>
        <li>
          The <a data-cite="json-ld11#specifying-the-type">type</a> MUST be
          set to <a data-cite="schema-org/Organization#">Organization</a>.
        </li>
        <li>
          The <a data-cite="schema-org/name#">name</a> property MUST contain
          a valid non-empty string.
        </li>
        <li>
          The <a data-cite="schema-org/logo#">logo</a> property MUST contain
          a valid <a data-cite="url#urls">URL</a>.
        </li>
        <li>
          The <a data-cite="schema-org/member#">member</a> property MUST
          contain a <a data-cite="schema-org/Person#">Person</a> that is a
          valid <a>currently logged in user</a>.
        </li>
      </ul>
    </p>

    <p>
      The user agent MUST validate the <a>currently logged in user</a> using
      the following steps:

      <ul>
        <li>
          The <a data-cite="json-ld11#specifying-the-type">type</a> MUST be
          set to <a data-cite="schema-org/Person#">Person</a>.
        </li>
        <li>
          The <a data-cite="schema-org/name#">name</a> property MUST contain
          a valid non-empty string.
        </li>
        <li>
          The <a data-cite="schema-org/name#">image</a> property MUST contain
          a valid <a data-cite="url#urls">URL</a>.
        </li>
        <li>
          The <a data-cite="schema-org/email#">email</a> property SHOULD be
          present. If present, it MUST contain a valid
          <a data-cite="EMAIL#section-3.4">email address</a>.
        </li>
      </ul>
    </p>

    <div class="example" id="example-1-sample-feed">
      <div class="marker">
          <a class="self-link" href="#example-1-sample-feed">
            Example<bdi> 1</bdi>
          </a>
          <span class="example-title">: Sample Media Feed</span>
      </div> 
      <pre>
        <code class="json">
          {
            "@context": "http://schema.org",
            "@type": "DataFeed",
            "dataFeedElement": [
              ...
            ]
            "provider": {
              "@type": "Organization",
              "member": {
                "@type": "Person",
                "email": "beccahughes@chromium.org",
                "name": "Becca Hughes",
                "image": "https://www.example.org/profile_pic.jpg"
              },
              "name": "Media Site",
              "logo": "https://www.example.org/logo.jpg" 
            }
          }
        </code>
      </pre>
    </div>
  </section>
</body>

</html>
